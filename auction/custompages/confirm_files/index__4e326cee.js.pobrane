!function(e){"use strict";!function(t,o){if("object"==typeof exports&&"object"==typeof module)module.exports=o();else if("function"==typeof e&&e.amd)e([],o);else{var n=o();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=21)}([function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.cx=t.createClassNameResolver=void 0;var n=o(1),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=t.createClassNameResolver=function(e){return function(){for(var t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];return o.map(function(t){return e[t]||t}).join(" ")}};t.cx=i(r.default)},function(e,t){e.exports={"opbox-metrum-header-link":"fee54_LPPcP",opboxMetrumHeaderLink:"fee54_1J5td","opbox-metrum-header-link-signal":"fee54_1clM8",opboxMetrumHeaderLinkSignal:"fee54_1clM8","opbox-metrum-header-button":"fee54_2NxiC",opboxMetrumHeaderButton:"fee54_2NxiC","is-disabled":"fee54_19bdT",isDisabled:"fee54_19bdT","opbox-metrum-header-button--secondary":"fee54_1H33r",opboxMetrumHeaderButtonSecondary:"fee54_1H33r","opbox-metrum-header-divider":"fee54_3cW8w",opboxMetrumHeaderDivider:"fee54_1rrip","opbox-metrum-header-list":"fee54_3NZWu",opboxMetrumHeaderList:"fee54_3OnM4","opbox-metrum-header-list--unstyled":"fee54_3lLbn",opboxMetrumHeaderListUnstyled:"fee54_3lLbn","opbox-metrum-header-list__item":"fee54_1NJil",opboxMetrumHeaderListItem:"fee54_3GPbu","opbox-metrum-header-list__item--link":"fee54_14dcF",opboxMetrumHeaderListItemLink:"fee54_14dcF","opbox-metrum-header-list__item--flex":"fee54_YrDJ_",opboxMetrumHeaderListItemFlex:"fee54_YrDJ_","opbox-metrum-header-list__column":"fee54_dD2Hu",opboxMetrumHeaderListColumn:"fee54_dD2Hu","opbox-metrum-header-list__column--right":"fee54_3HNSE",opboxMetrumHeaderListColumnRight:"fee54_3HNSE","opbox-metrum-header-type":"fee54_nTAMw",opboxMetrumHeaderType:"fee54_nTAMw","opbox-metrum-header-type--xsmall":"fee54_3Tjt-",opboxMetrumHeaderTypeXsmall:"fee54_3Tjt-","opbox-metrum-header-dropdown":"fee54_kE_A4",opboxMetrumHeaderDropdown:"fee54_kE_A4","opbox-metrum-header-dropdown__toggle":"fee54_2iUzi",opboxMetrumHeaderDropdownToggle:"fee54_2iUzi","opbox-metrum-header-dropdown__drop":"fee54_3RqiL",opboxMetrumHeaderDropdownDrop:"fee54_3RqiL","opbox-metrum-header-dropdown__drop--right":"fee54_2cRD9",opboxMetrumHeaderDropdownDropRight:"fee54_2cRD9","opbox-metrum-header-dropdown__drop--columns":"fee54_33phb",opboxMetrumHeaderDropdownDropColumns:"fee54_33phb","opbox-metrum-header-dropdown__col":"fee54_2Z1oc",opboxMetrumHeaderDropdownCol:"fee54_2Z1oc","is-open":"fee54_3TaXR",isOpen:"fee54_3TaXR","opbox-metrum-header-card":"fee54_16wEg",opboxMetrumHeaderCard:"fee54_16wEg","opbox-metrum-header-card--sticky":"fee54_2olss",opboxMetrumHeaderCardSticky:"fee54_2olss","opbox-metrum-header-card--no-space":"fee54_273li",opboxMetrumHeaderCardNoSpace:"fee54_273li","opbox-metrum-header-card--no-space-top":"fee54_101dP",opboxMetrumHeaderCardNoSpaceTop:"fee54_101dP","opbox-metrum-header-card--no-space-bottom":"fee54_1_kHL",opboxMetrumHeaderCardNoSpaceBottom:"fee54_1_kHL","opbox-metrum-header-card--no-space-right":"fee54_1LO11",opboxMetrumHeaderCardNoSpaceRight:"fee54_1LO11","opbox-metrum-header--allegrode":"fee54_2h2Fg",opboxMetrumHeaderAllegrode:"fee54_2h2Fg","opbox-metrum-header--simple":"fee54_3qdRv",opboxMetrumHeaderSimple:"fee54_3qdRv","opbox-metrum-header__tall@md":"fee54_y44_L",opboxMetrumHeaderTallMd:"fee54_y44_L","opbox-metrum-header__depts":"fee54_kF7w-",opboxMetrumHeaderDepts:"fee54_kF7w-","opbox-metrum-header__categories":"fee54_3aVI1",opboxMetrumHeaderCategories:"fee54_3aVI1","opbox-metrum-header-dropdown__categories":"fee54_2Db0Z",opboxMetrumHeaderDropdownCategories:"fee54_2Db0Z","opbox-metrum-header-dropdown__account":"fee54_3eIzt",opboxMetrumHeaderDropdownAccount:"fee54_3eIzt","opbox-metrum-header__divider":"fee54_1rrip","opbox-metrum-header__category":"fee54_3U4XY",opboxMetrumHeaderCategory:"fee54_3U4XY","opbox-metrum-header-dropdown--label-mini":"fee54_JEPvv",opboxMetrumHeaderDropdownLabelMini:"fee54_JEPvv","opbox-metrum-header-dropdown--label-midi":"fee54_dIDzM",opboxMetrumHeaderDropdownLabelMidi:"fee54_dIDzM","opbox-metrum-header__dropdown-toggle@sm":"fee54_3Frg5",opboxMetrumHeaderDropdownToggleSm:"fee54_3Frg5","opbox-metrum-header__icon--my-account":"fee54_2VJ3u",opboxMetrumHeaderIconMyAccount:"fee54_2VJ3u","opbox-metrum-header__icon-toggle":"fee54_2w7sa",opboxMetrumHeaderIconToggle:"fee54_2w7sa","opbox-metrum-header__search":"fee54_ThaHT",opboxMetrumHeaderSearch:"fee54_ThaHT","opbox-metrum-header__nav":"fee54_1LzRP",opboxMetrumHeaderNav:"fee54_1LzRP","opbox-metrum-header__icon":"fee54_3NVgZ",opboxMetrumHeaderIcon:"fee54_3NVgZ","opbox-metrum-header__accordion-line":"fee54_1fkFB",opboxMetrumHeaderAccordionLine:"fee54_1fkFB","opbox-metrum-header-wrapper--allegrode":"fee54_3NYkf",opboxMetrumHeaderWrapperAllegrode:"fee54_3NYkf","headroom--not-top":"fee54_198yM",headroomNotTop:"fee54_198yM","opbox-metrum-header-wrapper":"fee54_1xreU",opboxMetrumHeaderWrapper:"fee54_15baT","opbox-metrum-header":"fee54_CWqWO",opboxMetrumHeader:"fee54_CWqWO","opbox-metrum-header__center":"fee54_EjxZ1",opboxMetrumHeaderCenter:"fee54_EjxZ1","opbox-metrum-header__wrapper":"fee54_15baT","opbox-metrum-header__logo-wrapper":"fee54_3Bsgp",opboxMetrumHeaderLogoWrapper:"fee54_2N0im","opbox-metrum-header__link":"fee54_1J5td","opbox-metrum-header__logo":"fee54_1_FZs",opboxMetrumHeaderLogo:"fee54_1_FZs","opbox-metrum-header__sub-brand":"fee54_2-R2q",opboxMetrumHeaderSubBrand:"fee54_2-R2q","opbox-metrum-header__inline@sm":"fee54_3o8jl",opboxMetrumHeaderInlineSm:"fee54_3o8jl","opbox-metrum-header__border-bottom":"fee54_2mDvq",opboxMetrumHeaderBorderBottom:"fee54_2mDvq","opbox-metrum-header__border-bottom-none@sm":"fee54_1SADD",opboxMetrumHeaderBorderBottomNoneSm:"fee54_1SADD","opbox-metrum-header__border-right@sm":"fee54_3EtAX",opboxMetrumHeaderBorderRightSm:"fee54_3EtAX","opbox-metrum-header__border-left@sm":"fee54_2uFef",opboxMetrumHeaderBorderLeftSm:"fee54_2uFef","opbox-metrum-header__wide":"fee54_2Jkdp",opboxMetrumHeaderWide:"fee54_2Jkdp","opbox-metrum-header__overflow-hidden":"fee54_hCEVX",opboxMetrumHeaderOverflowHidden:"fee54_hCEVX","opbox-metrum-header__bar":"fee54_3m5js",opboxMetrumHeaderBar:"fee54_3m5js","opbox-metrum-header__bar--animate":"fee54_3L49X",opboxMetrumHeaderBarAnimate:"fee54_3L49X","opbox-metrum-header__links":"fee54_3znqn",opboxMetrumHeaderLinks:"fee54_3znqn","opbox-metrum-header__inline-link":"fee54_IFG6k",opboxMetrumHeaderInlineLink:"fee54_IFG6k","opbox-metrum-header__link-icon":"fee54_2790e",opboxMetrumHeaderLinkIcon:"fee54_2790e","opbox-metrum-header__notification":"fee54_3rwCT",opboxMetrumHeaderNotification:"fee54_3rwCT","opbox-metrum-header__notification--bottom-right":"fee54_3Hkbe",opboxMetrumHeaderNotificationBottomRight:"fee54_3Hkbe","opbox-metrum-header__notification--icon":"fee54_2wHfT",opboxMetrumHeaderNotificationIcon:"fee54_2wHfT","opbox-metrum-header__link-notification":"fee54_-h8c5",opboxMetrumHeaderLinkNotification:"fee54_-h8c5","opbox-metrum-header__account-name-notification":"fee54_39KUd",opboxMetrumHeaderAccountNameNotification:"fee54_39KUd","opbox-metrum-header__list-item":"fee54_3GPbu","opbox-metrum-header__link-category":"fee54_1MoEt",opboxMetrumHeaderLinkCategory:"fee54_1MoEt","opbox-metrum-header__list":"fee54_3OnM4","opbox-metrum-header__padding-left":"fee54_296TH",opboxMetrumHeaderPaddingLeft:"fee54_296TH","opbox-metrum-header__strip":"fee54_1Ns3d",opboxMetrumHeaderStrip:"fee54_1Ns3d","opbox-metrum-header__banner":"fee54_i44Jx",opboxMetrumHeaderBanner:"fee54_i44Jx","opbox-metrum-header__icon--bag":"fee54_1YC-6",opboxMetrumHeaderIconBag:"fee54_1YC-6","opbox-metrum-header__close-button":"fee54_2_lXA",opboxMetrumHeaderCloseButton:"fee54_2_lXA","opbox-metrum-header__arrow":"fee54_2o1kg",opboxMetrumHeaderArrow:"fee54_2o1kg","opbox-metrum-header__arrow--left":"fee54_3YT6m",opboxMetrumHeaderArrowLeft:"fee54_3YT6m","opbox-metrum-header__arrow--right":"fee54_Dxw8g",opboxMetrumHeaderArrowRight:"fee54_Dxw8g","is-hidden":"fee54_3u41m",isHidden:"fee54_3u41m","opbox-metrum-header__dropdown-link":"fee54_2ZRG6",opboxMetrumHeaderDropdownLink:"fee54_2ZRG6","mobile-wrapper":"fee54_314tm",mobileWrapper:"fee54_314tm","opbox-metrum-header-navigation-bar--hide":"fee54_33Hg3",opboxMetrumHeaderNavigationBarHide:"fee54_33Hg3","opbox-metrum-header-observed-offers-star":"fee54_2pfd3",opboxMetrumHeaderObservedOffersStar:"fee54_2pfd3","observed-offers-star-icon":"fee54_Eh80L",observedOffersStarIcon:"fee54_Eh80L","opbox-metrum-header-logo-wrapper":"fee54_2N0im","opbox-metrum-header__account-name":"fee54_3vXlh",opboxMetrumHeaderAccountName:"fee54_3vXlh","opbox-metrum-header__account-name-with-notification":"fee54_1E7NQ",opboxMetrumHeaderAccountNameWithNotification:"fee54_1E7NQ","opbox-metrum-header__slot":"fee54_3Lznh",opboxMetrumHeaderSlot:"fee54_3Lznh","showcase-slider-namespace":"fee54_3ZXXU",showcaseSliderNamespace:"fee54_3ZXXU",carousel:"fee54_lGvLy","opbox-metrum-header-navigation-bar":"fee54_3BjQA",opboxMetrumHeaderNavigationBar:"fee54_3BjQA","headroom--unpinned":"fee54_I0ofi",headroomUnpinned:"fee54_I0ofi","opbox-metrum-header-wrapper--simple":"fee54_3Md45",opboxMetrumHeaderWrapperSimple:"fee54_3Md45"}},function(e,t,o){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();Array.from||(Array.from=o(7));t.DOMUtils=function(){function e(t){n(this,e),this.document=t}return i(e,[{key:"createElement",value:function(e){return this.document.createElement(e)}},{key:"querySelector",value:function(e){return this.document.querySelector(e)}},{key:"querySelectorAll",value:function(e){return Array.from(this.document.querySelectorAll(e))}},{key:"findElementsByClassName",value:function(e){return Array.from(this.document.getElementsByClassName(e))}},{key:"findElementByClassName",value:function(e){var t=this.findElementsByClassName(e);return t.length>0?t[0]:null}},{key:"addListener",value:function(e,t,o){for(var n=arguments.length,i=Array(n>3?n-3:0),a=3;a<n;a++)i[a-3]=arguments[a];if("object"===(void 0===e?"undefined":r(e))&&"addEventListener"in e)e.addEventListener(t,o);else if("string"==typeof e){var s=Array.from(this.document.querySelectorAll(e));s.length>0&&s.forEach(function(e){return e.addEventListener.apply(e,[t,o].concat(i))})}}},{key:"removeListener",value:function(e,t,o){for(var n=arguments.length,i=Array(n>3?n-3:0),a=3;a<n;a++)i[a-3]=arguments[a];if("object"===(void 0===e?"undefined":r(e))&&"addEventListener"in e)e.removeEventListener(t,o);else if("string"==typeof e){var s=Array.from(this.document.querySelectorAll(e));s.length>0&&s.forEach(function(e){return e.removeEventListener.apply(e,[t,o].concat(i))})}}}],[{key:"toClassSelector",value:function(e){return"."+e}}]),e}()},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.toggleClassName="opbox-metrum-header-dropdown__toggle",t.dropClassName="opbox-metrum-header-dropdown__drop",t.dropRightClassName="opbox-metrum-header-dropdown__drop--right",t.dropdownClassName="opbox-metrum-header-dropdown",t.dropdownOpenClassName="is-open",t.mobileWrapperClassName="mobile-wrapper"},function(e,t){t.defaults={},t.set=function(e,o,n){var r=n||{},i=t.defaults,a=r.expires||i.expires,s=r.domain||i.domain,u=void 0!==r.path?r.path:void 0!==i.path?i.path:"/",c=void 0!==r.secure?r.secure:i.secure,d=void 0!==r.httponly?r.httponly:i.httponly,l=a?new Date("number"==typeof a?(new Date).getTime()+864e5*a:a):"";document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+o.replace(/[^+#$&\/:<-\[\]-}]/g,encodeURIComponent)+(l&&l.getTime()>=0?";expires="+l.toUTCString():"")+(s?";domain="+s:"")+(u?";path="+u:"")+(c?";secure":"")+(d?";httponly":"")},t.get=function(e){for(var t=document.cookie.split(";"),o=0;o<t.length;o++){var n=t[o],r=n.length,i=n.indexOf("=");i=i<0?r:i;if(decodeURIComponent(n.substring(0,i).replace(/^\s+/,""))===e)return decodeURIComponent(n.substring(i+1,r))}return null},t.erase=function(e,o){t.set(e,"",{expires:-1,domain:o&&o.domain,path:o&&o.path,secure:0,httponly:0})},t.all=function(){for(var e={},t=document.cookie.split(";"),o=0;o<t.length;o++){var n=t[o],r=n.length,i=n.indexOf("=");i=i<0?r:i;e[decodeURIComponent(n.substring(0,i).replace(/^\s+/,""))]=decodeURIComponent(n.substring(i+1,r))}return e}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.accountNameClassNameWrapper="opbox-metrum-header__account-name-wrapper",t.accountNameClassName="opbox-metrum-header__account-name",t.accountLoginButtonsClassName="opbox-metrum-header__account-login",t.accountLogoutButtonClassName="opbox-metrum-header__account-logout",t.accountNameWithNotificationClassName="opbox-metrum-header__account-name-with-notification",t.accountNameNotificationClassName="opbox-metrum-header__account-name-notification",t.notificationClassName="opbox-metrum-header__notification",t.linkNotificationClassName="opbox-metrum-header__link-notification"},,function(e,t,o){e.exports="function"==typeof Array.from?Array.from:o(8)},function(e,t){e.exports=function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},o=Math.pow(2,53)-1,n=function(e){var n=t(e);return Math.min(Math.max(n,0),o)},r=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},i=function(t,o){if(null!=t&&null!=o){var n=t[o];if(null==n)return;if(!e(n))throw new TypeError(n+" is not a function");return n}},a=function(e){var t=e.next();return!Boolean(t.done)&&t};return function(t){var o,s=this,u=arguments.length>1?arguments[1]:void 0;if(void 0!==u){if(!e(u))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}var c,d,l=i(t,r(t));if(void 0!==l){c=e(s)?Object(new s):[];var m=l.call(t);if(null==m)throw new TypeError("Array.from requires an array-like or iterable object");d=0;for(var f,p;;){if(!(f=a(m)))return c.length=d,c;p=f.value,c[d]=u?u.call(o,p,d):p,d++}}else{var h=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var b=n(h.length);c=e(s)?Object(new s(b)):new Array(b),d=0;for(var _;d<b;)_=h[d],c[d]=u?u.call(o,_,d):_,d++;c.length=b}return c}}()},function(e,t,o){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Account=void 0;var r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=o(2),a=o(5),s=o(0);t.Account=function(){function e(t,o){n(this,e),this.cookies=o,this.domUtils=new i.DOMUtils(t)}return r(e,[{key:"getUserIdentity",value:function(){var e=this.cookies.get("qeppo_login2");try{return JSON.parse(e)}catch(e){return null}}},{key:"showAccountName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.domUtils.findElementsByClassName((0,s.cx)(a.accountNameClassNameWrapper)),o=e.username;o&&t.forEach(function(e){return e.innerHTML=o})}},{key:"hideAccountLoginButtons",value:function(){this.domUtils.findElementsByClassName((0,s.cx)(a.accountLoginButtonsClassName)).forEach(function(e){return e.innerHTML=""})}},{key:"hideAccountLogoutButton",value:function(){this.domUtils.findElementsByClassName((0,s.cx)(a.accountLogoutButtonClassName)).forEach(function(e){return e.innerHTML=""})}},{key:"render",value:function(){var e=this.getUserIdentity();e?(this.showAccountName(e),this.hideAccountLoginButtons()):this.hideAccountLogoutButton()}}]),e}()},,,,,,,,,,,,function(e,t,o){function n(e){return e&&e.__esModule?e:{default:e}}var r=o(22),i=n(r),a=o(23),s=n(a),u=o(25),c=n(u),d=o(26),l=o(27),m=o(28),f=o(4),p=n(f),h=o(9),b=o(29);window.opbox.component.init({prototypeName:b.prototypeName},function(){new c.default(document,i.default).render(),new s.default(window,document).initialize();var e=new d.Dropdown(window,window.document);e.initialize(),new l.Strip(window,window.document).initialize(),new m.Notifications(e,new h.Account(window.document,p.default)).initialize()})},function(e,t){e.exports={"@myaccount/navigation/app.amd.js":"//cdn.allegrostatic.com/@myaccount/navigation/app.amd-73ebc611.js","@myaccount/navigation/app.css":"//cdn.allegrostatic.com/@myaccount/navigation/app-077bf4e1.css","@myaccount/navigation/app.js":"//cdn.allegrostatic.com/@myaccount/navigation/app-ab207208.js","@myaccount/navigation/app.newheader.js":"//cdn.allegrostatic.com/@myaccount/navigation/app.newheader-cbd4e6de.js","@myaccount/navigation/app.newheader.polyfill.js":"//cdn.allegrostatic.com/@myaccount/navigation/app.newheader.polyfill-301bdd09.js","@myaccount/navigation/app.polyfill.amd.js":"//cdn.allegrostatic.com/@myaccount/navigation/app.polyfill.amd-41fd0aae.js","@myaccount/navigation/app.polyfill.js":"//cdn.allegrostatic.com/@myaccount/navigation/app.polyfill-1879f017.js","@myaccount/navigation/legacy.css":"//cdn.allegrostatic.com/@myaccount/navigation/legacy-ec530d29.css","@myaccount/navigation/print.css":"//cdn.allegrostatic.com/@myaccount/navigation/print-6a93d1f6.css","@myaccount/navigation/webapi.css":"//cdn.allegrostatic.com/@myaccount/navigation/webapi-6d11b2f5.css"}},function(e,t,o){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=o(24),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=o(0),u=function(){function e(t,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default;n(this,e);var i=o.querySelector("."+(0,s.cx)("opbox-metrum-header--allegrode")),u=Boolean(o.querySelector("."+(0,s.cx)("opbox-metrum-header--simple"))),c=(0,s.cx)("opbox-metrum-header-wrapper"+(u?"--simple":""));this.headerWrapper=o.querySelector('[data-prototype-id="allegro.metrumHeader"]'),this.stickyDisabled=!!this.headerWrapper.querySelector("[data-metrum-header-sticky-disabled]"),this.resizeTimeout=null,this.headroomInstance=new r(this.headerWrapper,{offset:this.getHeaderOffset(),classes:{initial:(0,s.cx)(i?"opbox-metrum-header-wrapper--allegrode":c),unpinned:(0,s.cx)("headroom--unpinned"),notTop:(0,s.cx)("headroom--not-top")},tolerance:{down:1e3,up:0}}),this.window=t}return r(e,[{key:"getHeaderOffset",value:function(){var e=this.headerWrapper.getBoundingClientRect(),t=e.top,o=e.bottom,n=o-t,r=Math.abs(window.pageYOffset-Math.abs(t));return Math.abs(window.pageYOffset===Math.abs(t)?n:n+r)}},{key:"attachResizeHandler",value:function(){var e=this;this.window.addEventListener("resize",function(){clearTimeout(e.resizeTimeout),e.resizeTimeout=setTimeout(function(){e.headroomInstance.offset=e.getHeaderOffset()},200)})}},{key:"initialize",value:function(){this.stickyDisabled||(this.headroomInstance.init(),this.attachResizeHandler())}}]),e}();t.default=u},function(e,t,o){var n,r,i;/*!
 * headroom.js v0.9.3 - Give your page some headroom. Hide your header until you need it
 * Copyright (c) 2016 Nick Williams - http://wicky.nillia.ms/headroom.js
 * License: MIT
 */
!function(o,a){r=[],n=a,void 0!==(i="function"==typeof n?n.apply(t,r):n)&&(e.exports=i)}(0,function(){function e(e){this.callback=e,this.ticking=!1}function t(e){return e&&"undefined"!=typeof window&&(e===window||e.nodeType)}function o(e){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var n,r,i=e||{};for(r=1;r<arguments.length;r++){var a=arguments[r]||{};for(n in a)"object"!=typeof i[n]||t(i[n])?i[n]=i[n]||a[n]:i[n]=o(i[n],a[n])}return i}function n(e){return e===Object(e)?e:{down:e,up:e}}function r(e,t){t=o(t,r.options),this.lastKnownScrollY=0,this.elem=e,this.tolerance=n(t.tolerance),this.classes=t.classes,this.offset=t.offset,this.scroller=t.scroller,this.initialised=!1,this.onPin=t.onPin,this.onUnpin=t.onUnpin,this.onTop=t.onTop,this.onNotTop=t.onNotTop,this.onBottom=t.onBottom,this.onNotBottom=t.onNotBottom}var i={bind:!!function(){}.bind,classList:"classList"in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};return window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,e.prototype={constructor:e,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},r.prototype={constructor:r,init:function(){if(r.cutsTheMustard)return this.debouncer=new e(this.update.bind(this)),this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this},destroy:function(){var e=this.classes;this.initialised=!1,this.elem.classList.remove(e.unpinned,e.pinned,e.top,e.notTop,e.initial),this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var e=this.elem.classList,t=this.classes;!e.contains(t.pinned)&&e.contains(t.unpinned)||(e.add(t.unpinned),e.remove(t.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var e=this.elem.classList,t=this.classes;e.contains(t.unpinned)&&(e.remove(t.unpinned),e.add(t.pinned),this.onPin&&this.onPin.call(this))},top:function(){var e=this.elem.classList,t=this.classes;e.contains(t.top)||(e.add(t.top),e.remove(t.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var e=this.elem.classList,t=this.classes;e.contains(t.notTop)||(e.add(t.notTop),e.remove(t.top),this.onNotTop&&this.onNotTop.call(this))},bottom:function(){var e=this.elem.classList,t=this.classes;e.contains(t.bottom)||(e.add(t.bottom),e.remove(t.notBottom),this.onBottom&&this.onBottom.call(this))},notBottom:function(){var e=this.elem.classList,t=this.classes;e.contains(t.notBottom)||(e.add(t.notBottom),e.remove(t.bottom),this.onNotBottom&&this.onNotBottom.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},getElementPhysicalHeight:function(e){return Math.max(e.offsetHeight,e.clientHeight)},getScrollerPhysicalHeight:function(){return this.scroller===window||this.scroller===document.body?this.getViewportHeight():this.getElementPhysicalHeight(this.scroller)},getDocumentHeight:function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,t.scrollHeight,e.offsetHeight,t.offsetHeight,e.clientHeight,t.clientHeight)},getElementHeight:function(e){return Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight)},getScrollerHeight:function(){return this.scroller===window||this.scroller===document.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(e){var t=e<0,o=e+this.getScrollerPhysicalHeight()>this.getScrollerHeight();return t||o},toleranceExceeded:function(e,t){return Math.abs(e-this.lastKnownScrollY)>=this.tolerance[t]},shouldUnpin:function(e,t){var o=e>this.lastKnownScrollY,n=e>=this.offset;return o&&n&&t},shouldPin:function(e,t){var o=e<this.lastKnownScrollY,n=e<=this.offset;return o&&t||n},update:function(){var e=this.getScrollY(),t=e>this.lastKnownScrollY?"down":"up",o=this.toleranceExceeded(e,t);this.isOutOfBounds(e)||(e<=this.offset?this.top():this.notTop(),e+this.getViewportHeight()>=this.getScrollerHeight()?this.bottom():this.notBottom(),this.shouldUnpin(e,o)?this.unpin():this.shouldPin(e,o)&&this.pin(),this.lastKnownScrollY=e)}},r.options={tolerance:{up:0,down:0},offset:0,scroller:window,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}},r.cutsTheMustard=void 0!==i&&i.rAF&&i.bind&&i.classList,r})},function(e,t,o){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=o(0),a=function(){function e(t,o){n(this,e),this.document=t,this.maMenuRegularContainer=t.querySelectorAll("."+(0,i.cx)("myaccount-desk-js")),this.maMenuContainer=t.querySelectorAll("."+(0,i.cx)("my-account-desktop-left-menu")),this.maLegacyWrapper=t.querySelectorAll("#maWrapper > .fb"),this.assetsMap=o}return r(e,[{key:"includeLink",value:function(e,t){var o=this.document.createElement("link");return o.href=e,o.rel="stylesheet",o.media=t||"all",this.document.head.appendChild(o)}},{key:"includeScript",value:function(e){var t=this.document.createElement("script");return t.src=e,this.document.head.appendChild(t)}},{key:"shouldIncludeLegacyStyles",value:function(){return this.maLegacyWrapper.length+this.maMenuContainer.length>0}},{key:"shouldIncludePrintStyles",value:function(){return this.maLegacyWrapper.length>0}},{key:"shouldIncludeWebAPIStyles",value:function(){return this.document.location.pathname.indexOf("/myaccount/webapi.php")>-1}},{key:"shouldRender",value:function(){return this.maLegacyWrapper.length+this.maMenuContainer.length+this.maMenuRegularContainer.length>0}},{key:"shouldIncludePolyfills",value:function(){return!Boolean(window.fetch&&Array.from&&Array.prototype.includes&&Array.prototype.find&&Array.prototype.findIndex&&String.prototype.startsWith)}},{key:"render",value:function(){this.shouldRender()&&(this.shouldIncludeLegacyStyles()&&this.includeLink(this.assetsMap["@myaccount/navigation/legacy.css"]),this.shouldIncludePrintStyles()&&this.includeLink(this.assetsMap["@myaccount/navigation/print.css"],"print"),this.shouldIncludeWebAPIStyles()&&this.includeLink(this.assetsMap["@myaccount/navigation/webapi.css"]),this.includeLink(this.assetsMap["@myaccount/navigation/app.css"]),this.shouldIncludePolyfills()?this.includeScript(this.assetsMap["@myaccount/navigation/app.newheader.polyfill.js"]):this.includeScript(this.assetsMap["@myaccount/navigation/app.newheader.js"]))}}]),e}();t.default=a},function(e,t,o){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Dropdown=void 0;var r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=o(2),a=o(3),s=o(0);(0,s.cx)(a.toggleClassName),t.Dropdown=function(){function e(t,o){n(this,e),this.window=t,this.domUtils=new i.DOMUtils(o),this.dropdowns=this.domUtils.findElementsByClassName((0,s.cx)(a.dropdownClassName)),this.headerWrapper=o.querySelector('[data-prototype-id="allegro.metrumHeader"]')}return r(e,[{key:"toggle",value:function(e){e.classList.contains((0,s.cx)(a.dropdownOpenClassName))?this.hide(e):this.show(e)}},{key:"getAccountDropdownNode",value:function(){var e=this.dropdowns.filter(function(e){return"account_dropdown"===e.getAttribute("data-dropdown-id")});return e.length?e[0]:null}},{key:"sendEvent",value:function(e,t){var o=e.getAttribute("data-dropdown-id")||"";this.window.opbox.analytics.sendEvent(e,t,o)}},{key:"show",value:function(e){this.closeAll(),e.classList.add((0,s.cx)(a.dropdownOpenClassName)),this.sendEvent(e,"show_dropdown"),e.getAttribute("data-disable-sticky-while-open")&&this.headerWrapper.setAttribute("data-dropdown-open","")}},{key:"hide",value:function(e){e.classList.remove((0,s.cx)(a.dropdownOpenClassName)),this.sendEvent(e,"hide_dropdown"),this.headerWrapper.removeAttribute("data-dropdown-open")}},{key:"closeAll",value:function(){var e=this;this.dropdowns.forEach(function(t){t.classList.contains((0,s.cx)(a.dropdownOpenClassName))&&e.hide(t)})}},{key:"toggleClickListener",value:function(e){e.preventDefault();var t=e.currentTarget.parentElement;t&&this.toggle(t)}},{key:"windowClickListener",value:function(e){e.target.matches("."+(0,s.cx)(a.toggleClassName))||this.dropdowns.some(function(t){return t.contains(e.target)})||this.closeAll()}},{key:"initialize",value:function(){this.domUtils.addListener("."+(0,s.cx)(a.toggleClassName),"click",this.toggleClickListener.bind(this)),this.domUtils.addListener(this.window,"click",this.windowClickListener.bind(this))}}]),e}()},function(e,t,o){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Strip=t.hiddenArrowClassName=t.rightArrowClassName=t.leftArrowClassName=t.stripContainerClassName=void 0;var r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=o(2),a=o(0),s=t.stripContainerClassName=(0,a.cx)("opbox-metrum-header__bar"),u=t.leftArrowClassName=(0,a.cx)("opbox-metrum-header__arrow--left"),c=t.rightArrowClassName=(0,a.cx)("opbox-metrum-header__arrow--right"),d=t.hiddenArrowClassName=(0,a.cx)("is-hidden");t.Strip=function(){function e(t,o){n(this,e),this.window=t,this.domUtils=new i.DOMUtils(o),this.container=this.domUtils.findElementByClassName(s),this.leftArrow=this.domUtils.findElementByClassName(u),this.rightArrow=this.domUtils.findElementByClassName(c),this.render=this.render.bind(this),this.move=this.move.bind(this),this.scrollTo=this.scrollTo.bind(this)}return r(e,[{key:"move",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(){var o=e.container.scrollWidth-e.container.clientWidth,n=e.container.scrollLeft,r=n+t*e.container.clientWidth*.9,i=Math.min(Math.max(r,0),o);e.window.opbox.tween(n,i,e.scrollTo)}}},{key:"scrollTo",value:function(e){this.container.scrollLeft=e}},{key:"render",value:function(){var t=this.container.scrollWidth-this.container.clientWidth;e.renderArrow(this.leftArrow,this.container.scrollLeft>0),e.renderArrow(this.rightArrow,this.container.scrollLeft-t<0)}},{key:"initialize",value:function(){this.container&&(this.render(),this.domUtils.addListener(this.container,"scroll",this.render),this.domUtils.addListener(this.window,"resize",this.render),this.domUtils.addListener(this.leftArrow,"click",this.move(-1)),this.domUtils.addListener(this.rightArrow,"click",this.move(1)))}}],[{key:"renderArrow",value:function(e,t){e&&t&&e.classList.contains(d)?e.classList.remove(d):!e||t||e.classList.contains(d)||e.classList.add(d)}}]),e}()},function(e,t,o){function n(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Notifications=t.baseNotificationsUrl=t.linkNotificationClassName=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),a=o(0),s=t.linkNotificationClassName=(0,a.cx)("opbox-metrum-header__link-notification"),u=t.baseNotificationsUrl="/notification-badges";t.Notifications=function(){function e(t,o){r(this,e),this.dropdown=t,this.account=o}return i(e,[{key:"initialize",value:function(){this.taggedElements=this.getTaggedDropdownElements(),this.account.getUserIdentity()&&window.opbox.edge&&this.requestNotifications()}},{key:"getTaggedDropdownElements",value:function(){var e,t=this.dropdown.getAccountDropdownNode();if(!t)return{};var o=t.getElementsByClassName(s);return(e=[]).concat.apply(e,n(o)).reduce(function(e,t){var o=t.dataset.notificationTag;return o&&(e[o]=t),e},{})}},{key:"requestNotifications",value:function(){var e=this,t=Object.keys(this.taggedElements),o=t.filter(this.shouldSendReadNotification),n=this.account.getUserIdentity(),r=n.id;return window.opbox.edge.get(this.getNotificationUrl(r,t,o),{withCredentials:!0}).then(function(t){var o=t.data;return e.onNotificationsResponse(o)}).catch(function(e){})}},{key:"onNotificationsResponse",value:function(e){var t=this;Object.keys(e).map(function(o){var n=e[o],r=t.taggedElements[o];r&&n&&(r.innerHTML=n)})}},{key:"getNotificationUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=t.length?"tags="+t.map(encodeURIComponent).join(","):"",r=o.length?"read="+o.map(encodeURIComponent).join(","):"",i="userId="+e,a=[n,r,i].filter(Boolean).join("&");return[u,a].filter(Boolean).join("?")}},{key:"shouldSendReadNotification",value:function(e){switch(e){case"bundles":return/bundles\/Index\.php/.test(window.location.href);default:return!1}}}]),e}()},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});t.prototypeName="allegro.metrumHeader",t.prototypeVersion="2.0"}])})}(null);