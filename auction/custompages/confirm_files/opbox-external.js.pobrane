"function"!=typeof Object.assign&&(Object.assign=function(n){if(void 0===n||null===n)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),r=1;r<arguments.length;r++){var t=arguments[r];if(void 0!==t&&null!==t)for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])}return o});
!function(e){function n(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function t(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,n._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void i(t.promise,e)}o(t.promise,r)}else(1===e._state?o:i)(t.promise,e._value)})):e._deferreds.push(t)}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var o=t.then;if(t instanceof n)return e._state=3,e._value=t,void r(e);if("function"==typeof o)return void u(function(e,n){return function(){e.apply(n,arguments)}}(o,t),e)}e._state=1,e._value=t,r(e)}catch(n){i(e,n)}}function i(e,n){e._state=2,e._value=n,r(e)}function r(e){2===e._state&&0===e._deferreds.length&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var o=0,i=e._deferreds.length;o<i;o++)t(e,e._deferreds[o]);e._deferreds=null}function u(e,n){var t=!1;try{e(function(e){t||(t=!0,o(n,e))},function(e){t||(t=!0,i(n,e))})}catch(e){if(t)return;t=!0,i(n,e)}}var f=setTimeout;n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,n){var o=new this.constructor(function(){});return t(this,new function(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}(e,n,o)),o},n.all=function(e){var t=Array.prototype.slice.call(e);return new n(function(e,n){function o(r,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var f=u.then;if("function"==typeof f)return void f.call(u,function(e){o(r,e)},n)}t[r]=u,0==--i&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var i=t.length,r=0;r<t.length;r++)o(r,t[r])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(n){n(e)})},n.reject=function(e){return new n(function(n,t){t(e)})},n.race=function(e){return new n(function(n,t){for(var o=0,i=e.length;o<i;o++)e[o].then(n,t)})},n._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){f(e,0)},n._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},n._setImmediateFn=function(e){n._immediateFn=e},n._setUnhandledRejectionFn=function(e){n._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=n:e.Promise||(e.Promise=n)}(this);
!function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,r){"use strict";var o=r(12)();t.exports=function(t){return t!==o&&null!==t}},function(t,e,r){"use strict";r(2)()||Object.defineProperty(r(3),"Symbol",{value:r(4),configurable:!0,enumerable:!1,writable:!0})},function(t,e,r){"use strict";var o={object:!0,symbol:!0};t.exports=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(t){return!1}return!!o[typeof Symbol.iterator]&&(!!o[typeof Symbol.toPrimitive]&&!!o[typeof Symbol.toStringTag])}},function(t,e){t.exports=function(){return this}()},function(t,e,r){"use strict";var o,n,i,s,a=r(5),u=r(19),c=Object.create,f=Object.defineProperties,p=Object.defineProperty,l=Object.prototype,y=c(null);if("function"==typeof Symbol){o=Symbol;try{String(o()),s=!0}catch(t){}}var h=function(){var t=c(null);return function(e){for(var r,o,n=0;t[e+(n||"")];)++n;return e+=n||"",t[e]=!0,r="@@"+e,p(l,r,a.gs(null,function(t){o||(o=!0,p(this,r,a(t)),o=!1)})),r}}();i=function(t){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return n(t)},t.exports=n=function t(e){var r;if(this instanceof t)throw new TypeError("Symbol is not a constructor");return s?o(e):(r=c(i.prototype),e=void 0===e?"":String(e),f(r,{__description__:a("",e),__name__:a("",h(e))}))},f(n,{for:a(function(t){return y[t]?y[t]:y[t]=n(String(t))}),keyFor:a(function(t){var e;u(t);for(e in y)if(y[e]===t)return e}),hasInstance:a("",o&&o.hasInstance||n("hasInstance")),isConcatSpreadable:a("",o&&o.isConcatSpreadable||n("isConcatSpreadable")),iterator:a("",o&&o.iterator||n("iterator")),match:a("",o&&o.match||n("match")),replace:a("",o&&o.replace||n("replace")),search:a("",o&&o.search||n("search")),species:a("",o&&o.species||n("species")),split:a("",o&&o.split||n("split")),toPrimitive:a("",o&&o.toPrimitive||n("toPrimitive")),toStringTag:a("",o&&o.toStringTag||n("toStringTag")),unscopables:a("",o&&o.unscopables||n("unscopables"))}),f(i.prototype,{constructor:a(n),toString:a("",function(){return this.__name__})}),f(n.prototype,{toString:a(function(){return"Symbol ("+u(this).__description__+")"}),valueOf:a(function(){return u(this)})}),p(n.prototype,n.toPrimitive,a("",function(){var t=u(this);return"symbol"==typeof t?t:t.toString()})),p(n.prototype,n.toStringTag,a("c","Symbol")),p(i.prototype,n.toStringTag,a("c",n.prototype[n.toStringTag])),p(i.prototype,n.toPrimitive,a("c",n.prototype[n.toPrimitive]))},function(t,e,r){"use strict";var o=r(6),n=r(14),i=r(15),s=r(16);(t.exports=function(t,e){var r,i,a,u,c;return arguments.length<2||"string"!=typeof t?(u=e,e=t,t=null):u=arguments[2],null==t?(r=a=!0,i=!1):(r=s.call(t,"c"),i=s.call(t,"e"),a=s.call(t,"w")),c={value:e,configurable:r,enumerable:i,writable:a},u?o(n(u),c):c}).gs=function(t,e,r){var a,u,c,f;return"string"!=typeof t?(c=r,r=e,e=t,t=null):c=arguments[3],null==e?e=void 0:i(e)?null==r?r=void 0:i(r)||(c=r,r=void 0):(c=e,e=r=void 0),null==t?(a=!0,u=!1):(a=s.call(t,"c"),u=s.call(t,"e")),f={get:e,set:r,configurable:a,enumerable:u},c?o(n(c),f):f}},function(t,e,r){"use strict";t.exports=r(7)()?Object.assign:r(8)},function(t,e,r){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,r){"use strict";var o=r(9),n=r(13),i=Math.max;t.exports=function(t,e){var r,s,a,u=i(arguments.length,2);for(t=Object(n(t)),a=function(o){try{t[o]=e[o]}catch(t){r||(r=t)}},s=1;s<u;++s)e=arguments[s],o(e).forEach(a);if(void 0!==r)throw r;return t}},function(t,e,r){"use strict";t.exports=r(10)()?Object.keys:r(11)},function(t,e,r){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e,r){"use strict";var o=r(0),n=Object.keys;t.exports=function(t){return n(o(t)?Object(t):t)}},function(t,e,r){"use strict";t.exports=function(){}},function(t,e,r){"use strict";var o=r(0);t.exports=function(t){if(!o(t))throw new TypeError("Cannot use null or undefined");return t}},function(t,e,r){"use strict";var o=r(0),n=Array.prototype.forEach,i=Object.create;t.exports=function(t){var e=i(null);return n.call(arguments,function(t){o(t)&&function(t,e){var r;for(r in t)e[r]=t[r]}(Object(t),e)}),e}},function(t,e,r){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,r){"use strict";t.exports=r(17)()?String.prototype.contains:r(18)},function(t,e,r){"use strict";var o="razdwatrzy";t.exports=function(){return"function"==typeof o.contains&&(!0===o.contains("dwa")&&!1===o.contains("foo"))}},function(t,e,r){"use strict";var o=String.prototype.indexOf;t.exports=function(t){return o.call(this,t,arguments[1])>-1}},function(t,e,r){"use strict";var o=r(20);t.exports=function(t){if(!o(t))throw new TypeError(t+" is not a symbol");return t}},function(t,e,r){"use strict";t.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&("Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag]))}}]),function(){"use strict";try{self}catch(t){try{global}catch(t){window}}var t=function(){function t(e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.cursor=0,this.collection=e,this.kind=r}return t.prototype.next=function(){this.done=this.cursor===this.collection.length;var t={done:this.done,value:this.done?void 0:"value"===this.kind||"key"===this.kind?this.collection[this.cursor]:[this.cursor,this.collection[this.cursor]]};return this.cursor++,t},t}(),e=function(t){function e(r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,o))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.toString=function(){return"[object String Iterator]"},e}(t),r=function(t){function e(r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,o))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.toString=function(){return"[object Array Iterator]"},e}(t);if("function"!=typeof Array.prototype[Symbol.iterator]){var o="values"in Array.prototype,n="entries"in Array.prototype,i="keys"in Array.prototype;o||(Array.prototype.values=function(){return new r(this,"value")}),n||(Array.prototype.entries=function(){return new r(this,"key+value")}),i||(Array.prototype.keys=function(){return new r(this,"key")}),Array.prototype[Symbol.iterator]=Array.prototype.values}if("function"!=typeof String.prototype[Symbol.iterator]&&(String.prototype[Symbol.iterator]=function(){return new e(this,"value")}),"function"!=typeof NodeList.prototype[Symbol.iterator]){var s="values"in NodeList.prototype,a="entries"in NodeList.prototype,u="keys"in NodeList.prototype;s||(NodeList.prototype.values=function(){return new r(this,"value")}),a||(NodeList.prototype.entries=function(){return new r(this,"key+value")}),u||(NodeList.prototype.keys=function(){return new r(this,"key")}),NodeList.prototype[Symbol.iterator]=Array.prototype.values}}(),Array.from||(Array.from=function(){var t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},r=Math.pow(2,53)-1,o=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),r)};return function(t){var r=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!e(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}for(var s,a=o(r.length),u=e(this)?Object(new this(a)):new Array(a),c=0;c<a;)s=r[c],u[c]=i?void 0===n?i(s,c):i.call(n,s,c):s,c+=1;return u.length=a,u}}()),Array.prototype.find||(Array.prototype.find=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e=Object(this),r=e.length>>>0,o=arguments[1],n=void 0,i=0;i<r;i++)if(n=e[i],t.call(o,n,i,e))return n}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),r=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var o=arguments[1],n=0;n<r;){var i=e[n];if(t.call(o,i,n,e))return n;n++}return-1}}),Array.prototype.includes||(Array.prototype.includes=function(t){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var e=Object(this),r=parseInt(e.length,10)||0;if(0===r)return!1;var o,n=parseInt(arguments[1],10)||0;n>=0?o=n:(o=r+n)<0&&(o=0);for(var i;o<r;){if(i=e[o],t===i||t!=t&&i!=i)return!0;o++}return!1}),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){var e,r=(this.document||this.ownerDocument).querySelectorAll(t),o=this;do{for(e=r.length;--e>=0&&r.item(e)!==o;);}while(e<0&&(o=o.parentElement));return o}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r}if("function"==typeof window.CustomEvent)return!1;t.prototype=window.Event.prototype,window.CustomEvent=t}(),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var r=0;r<this.length;r++)t.call(e,this[r],r,this)}),String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),String.prototype.repeat||(String.prototype.repeat=function(t){if(null==this)throw new TypeError("can't convert "+this+" to object");var e=""+this;if((t=+t)!=t&&(t=0),t<0)throw new RangeError("repeat count must be non-negative");if(t==1/0)throw new RangeError("repeat count must be less than infinity");if(t=Math.floor(t),0==e.length||0==t)return"";if(e.length*t>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var r="";1==(1&t)&&(r+=e),0!=(t>>>=1);)e+=e;return r}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function o(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return p.iterable&&(e[Symbol.iterator]=function(){return e}),e}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function a(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(p.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(p.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(p.arrayBuffer&&p.blob&&y(t))this._bodyArrayBuffer=a(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!h(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=a(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(function(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r})}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(function(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e})}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var r=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new n(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new n(e.headers)),this.method=function(t){var e=t.toUpperCase();return d.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new n(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var p={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(p.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=function(t){return t&&DataView.prototype.isPrototypeOf(t)},h=ArrayBuffer.isView||function(t){return t&&l.indexOf(Object.prototype.toString.call(t))>-1};n.prototype.append=function(t,o){t=e(t),o=r(o);var n=this.map[t];this.map[t]=n?n+","+o:o},n.prototype.delete=function(t){delete this.map[e(t)]},n.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},n.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},n.prototype.set=function(t,o){this.map[e(t)]=r(o)},n.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},n.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),o(t)},n.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),o(t)},n.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),o(t)},p.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},u.call(c.prototype),u.call(f.prototype),f.prototype.clone=function(){return new f(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},f.error=function(){var t=new f(null,{status:0,statusText:""});return t.type="error",t};var b=[301,302,303,307,308];f.redirect=function(t,e){if(-1===b.indexOf(e))throw new RangeError("Invalid status code");return new f(null,{status:e,headers:{location:t}})},t.Headers=n,t.Request=c,t.Response=f,t.fetch=function(t,e){return new Promise(function(r,o){var i=new c(t,e),s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:function(t){var e=new n;return t.split(/\r?\n/).forEach(function(t){var r=t.split(":"),o=r.shift().trim();if(o){var n=r.join(":").trim();e.append(o,n)}}),e}(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;r(new f(e,t))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials&&(s.withCredentials=!0),"responseType"in s&&p.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this);
!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.map=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments[1],n=arguments[2],i={};return Object.keys(e).forEach(function(r){i[r]=t.call(n,e[r],r,e)}),i},t.isObject=function(e){return"object"===(void 0===e?"undefined":i(e))&&null!==e},t.isUndefined=function(e){return void 0===e},t.isFunction=function(e){return"function"==typeof e},t.isEmpty=function(e){return null===e||"object"!==(void 0===e?"undefined":i(e))||0===Object.keys(e).length},t.querySelectorAll=function(e,t){return Array.prototype.slice.call(e.querySelectorAll(t))},t.noop=function(){},t.debounce=function(e,t,n){var i=void 0;return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=this,u=n&&!i;return clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(s,o)},t),u&&e.apply(s,o),i}},t.createEvent=function(e,t){var n=t.document.createEvent("CustomEvent");return n.initCustomEvent(e,!0,!0,{}),n},t.concat=function(e,t){return e.concat(t)},t.find=function(e,t){for(var n=0,i=e.length;n<i;n+=1)if(t(e[n],n,e))return e[n];return null}},function(e,t,n){"use strict";function i(e,t,n){var i=t[n];if(void 0!==i&&null!==i){if(a.call(e,n)&&(void 0===e[n]||null===e[n]))throw new TypeError("Cannot convert undefined or null to object ("+n+")");a.call(e,n)&&o(i)?e[n]=r(Object(e[n]),t[n]):e[n]=i}}function r(e,t){if(e===t)return e;t=Object(t);for(var n in t)a.call(t,n)&&i(e,t,n);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(t),o=0;o<r.length;o++)s.call(t,r[o])&&i(e,t,r[o]);return e}var o=n(8),a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(e){e=function(e){if(null===e||void 0===e)throw new TypeError("Sources cannot be null or undefined");return Object(e)}(e);for(var t=1;t<arguments.length;t++)r(e,arguments[t]);return e}},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.attach=void 0;var r=i(n(4)),o=new(i(n(5)).default)(window,new r.default);o.run();t.attach=o.attach.bind(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastRequest=null}return r(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,{},t)}},{key:"post",value:function(e,t,n){return this.request("POST",e,t,n)}},{key:"put",value:function(e,t,n){return this.request("PUT",e,t,n)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,{},t)}},{key:"request",value:function(t,n,i,r){var o=r.headers,a=void 0===o?{}:o,s=r.validateStatus,u=void 0===s?e.defaultValidateFunction:s,c=r.withCredentials,l=void 0!==c&&c,f=r.cancelLast;void 0!==f&&f&&this.cancelLastRequest();var d=e.makeRequest(t,n,i,a,l);return this.lastRequest=d,e.toPromise(d,u)}},{key:"cancelLastRequest",value:function(){null!==this.lastRequest&&this.lastRequest.abort()}}],[{key:"makeRequest",value:function(t,n,i,r,o){var a=new XMLHttpRequest;return a.open(t,n,!0),Object.keys(r).forEach(function(e){a.setRequestHeader(e,r[e])}),a.withCredentials=o,a.send(e.serialize(t,i)),a}},{key:"toPromise",value:function(t,n){return new Promise(function(i,r){t.readyState===XMLHttpRequest.DONE?e.checkResponse(t,n,i,r):t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&e.checkResponse(t,n,i,r)}})}},{key:"serialize",value:function(e,t){return"POST"===e||"PUT"===e?"object"===(void 0===t?"undefined":i(t))?JSON.stringify(t):t:null}},{key:"checkResponse",value:function(t,n,i,r){var o=t.status,a=t.responseText,s=n(o),u={};try{u=JSON.parse(a)}catch(e){u=a}s?i({status:o,data:u,headers:e.parseHeaders(t.getAllResponseHeaders())}):r({status:o,data:u,message:"Request failed with status code "+o})}},{key:"defaultValidateFunction",value:function(e){return 200===e||201===e||204===e}},{key:"parseHeaders",value:function(e){var t={},n=void 0,i=void 0,r=void 0;return e.split("\n").forEach(function(e){r=e.indexOf(":"),n=e.substr(0,r).trim().toLowerCase(),i=e.substr(r+1).trim(),n&&(t[n]=t[n]?t[n]+", "+i:i)}),t}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(n(6)),a=i(n(7)),s=i(n(9)),u=i(n(10)),c=i(n(11)),l=i(n(12)),f=i(n(13)),d=n(0),h=i(n(15)),v=i(n(17)),m=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attach=function(){var e=o.default.getGlobal(i.targetWindow),t=i.API;e&&(0,v.default)(e,t),o.default.assignToGlobal(i.targetWindow,t),(0,h.default)(),i.broadcastAPILoadEvent()},this.targetWindow=t;var r=o.default.fromWindow(this.targetWindow),d=new u.default({targetWindow:t,config:r,isExternal:!0});this.boxViewsMarker=new c.default({targetWindow:t}),this.analytics=new a.default({targetWindow:t,config:r,cookieMonsterClient:d}),this.component=new s.default({targetWindow:t}),this.edgeClient=new l.default({httpClient:n,config:r}),this.uiTools=new f.default({targetWindow:t}),this.config=r,this.cookieMonsterClient=d,this.analytics.initialize(),this.boxViewsMarker.initialize()}return r(e,[{key:"broadcastAPILoadEvent",value:function(){var e=(0,d.createEvent)("opboxAPILoaded",this.targetWindow);this.targetWindow.dispatchEvent(e)}},{key:"domReadyHelper",value:function(e){"loading"===this.targetWindow.document.readyState?this.targetWindow.document.addEventListener("DOMContentLoaded",e):this.targetWindow.setTimeout(e,0)}},{key:"run",value:function(){this.attach()}},{key:"API",get:function(){return{boxViewsMarker:this.boxViewsMarker.createAPI(),analytics:this.analytics.createAPI(),component:this.component.createAPI(),edge:this.edgeClient.createAPI(),tween:this.uiTools.tween.bind(this.uiTools),scrollTo:this.uiTools.scrollTo.bind(this.uiTools),onDomReady:this.domReadyHelper.bind(this),loaded:!0}}}]),e}();t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.baseDomain,r=n.edgeHost,o=n.lazyBoxNames,a=void 0===o?[]:o,s=n.canonicalRoute,u=n.cookieMonster,c=void 0===u?{}:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isLazy=function(){return t.lazyBoxNames.length>0},this.baseDomain=i,this.edgeHost=r,this.lazyBoxNames=a,this.canonicalRoute=s,this.cookieMonster=c}return i(e,null,[{key:"getGlobal",value:function(e){return e.opbox||{}}},{key:"fromWindow",value:function(t){return new e(e.getGlobal(t).config)}},{key:"assignToGlobal",value:function(e,t){e.opbox=e.opbox||{},Object.assign(e.opbox,t)}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e,t,n){return e.addEventListener(t,n),{remove:function(){e.removeEventListener(t,n)}}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),a=function(){function e(t){var n=t.targetWindow,i=t.config,r=t.cookieMonsterClient;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=i.cookieMonster,a=(o=void 0===o?{}:o).boxViewDisabled,s=o.defaultCustomParams,u=void 0===s?{}:s;this.targetWindow=n,this.document=this.targetWindow.document,this.boxViewDisabled=a,this.cookieMonsterClient=r,this.defaultCustomParams=u}return r(e,[{key:"initialize",value:function(){this.cookieMonsterClient.initialize(),this.eventHandlers=[i(this.document,"change",this.handleChange.bind(this)),i(this.document,"click",this.handleClick.bind(this)),i(this.document,"submit",this.handleSubmit.bind(this)),i(this.document,"contextmenu",this.handleClick.bind(this)),i(this.document,"boxView",this.handleBoxView.bind(this)),i(this.targetWindow,"DOMContentLoaded",this.detectAdblock.bind(this))]}},{key:"teardown",value:function(){this.eventHandlers.forEach(function(e){e.remove()})}},{key:"sendEvent",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t&&n){var a=t.closest("[data-analytics-category]").getAttribute("data-analytics-category"),s=t.closest("[data-box-name]").getAttribute("data-box-name"),u=e.extractAnalyticsTags(t),c=e.extractGroups(t),l=u.length?{analyticsTags:u}:{},f=c.length?{groups:c}:{},d=Object.assign({},l,f,{boxName:s}),h=(0,o.default)(r,{_opbox:d});this.cookieMonsterClient.send("event",{category:a,action:n,label:s,value:i,customParams:(0,o.default)(h,this.defaultCustomParams.ev)})}}},{key:"sendBoxInteractionEvent",value:function(e){var t=e.contextNode,n=e.value,i=e.customParams;this.sendEvent(t,"boxInteraction",n,i)}},{key:"detectAdblock",value:function(){var e=this,t=document.createElement("div");t.innerHTML="&nbsp;",t.className="adsbox",this.document.body.appendChild(t),this.targetWindow.setTimeout(function(){var n=0!==t.offsetHeight;e.cookieMonsterClient.send("event",{category:"clearPV",action:n,customParams:e.defaultCustomParams.ev}),e.document.body.removeChild(t)},100)}},{key:"handleClick",value:function(e){this.handleBoxInteraction(e),this.handleLinkClick(e)}},{key:"handleBoxInteraction",value:function(t){var n=t.target.closest("[data-analytics-interaction]");if(n){var i=e.extractCustomParams(n,"data-analytics-interaction-custom-"),r=n.getAttribute("data-analytics-interaction-value")||n.textContent.trim();this.sendEvent(n,"boxInteraction",r,i)}}},{key:"handleLinkClick",value:function(t){var n=t.target.closest("a");if(n&&n.hasAttribute("data-analytics-clickable")){var i=n.getAttribute("data-analytics-click-value")||n.textContent.trim(),r=n.getAttribute("href"),o=t.pageX?{pageX:t.pageX,pageY:t.pageY}:{},a=Object.assign(e.extractCustomParams(n,"data-analytics-click-opbox-custom-"),{destinationUrl:r},o),s=Object.assign({},e.extractCustomParams(n,"data-analytics-click-custom-"),{_opbox:a});this.sendEvent(n,t.type,i,s)}}},{key:"handleChange",value:function(t){var n=t.target;if("select-one"===n.type&&n&&n.hasAttribute("data-analytics-selectable")){var i=n.options[n.selectedIndex].value,r=e.extractCustomParams(n,"data-analytics-select-custom-");this.sendEvent(n,"change",i,r)}}},{key:"handleSubmit",value:function(e){var t=e.target,n=t.querySelector("input[type=submit]");if(t&&t.hasAttribute("data-analytics-submittable")){var i=n?n.value:"";this.sendEvent(t,"submit",i,{})}}},{key:"handleBoxView",value:function(t){var n=t.target,i="boxView";if(n&&n.hasAttribute("data-analytics-enabled")&&(!this.boxViewDisabled||n.hasAttribute("data-item"))&&!e.hasFragmentAsImmediateChild(n)){n.hasAttribute("data-item")&&(i="itemView");var r=Object.assign({},e.extractCustomParams(n,"data-analytics-view-custom-"));n.firstChild&&n.firstChild.nodeType===Node.ELEMENT_NODE&&Object.assign(r,e.extractCustomParams(n.firstChild,"data-analytics-view-custom-")),this.sendEvent(n,i,n.getAttribute("data-analytics-view-value")||"",r)}}},{key:"createAPI",value:function(){return{sendEvent:this.sendEvent.bind(this),sendBoxInteractionEvent:this.sendBoxInteractionEvent.bind(this)}}}],[{key:"toCamelCase",value:function(e){return e.replace(/^([A-Z])|[\s|_-](\w)/g,function(e,t,n){return n?n.toUpperCase():t.toLowerCase()})}},{key:"extractCustomParams",value:function(t,n){for(var i={},r=0;r<t.attributes.length;r+=1){var o=t.attributes[r];if(0===o.name.indexOf(n)){var a=o.name.replace(n,"");i[e.toCamelCase(a)]=o.value}}return i}},{key:"extractAnalyticsTags",value:function(e){var t=e.closest("[data-analytics-tags]");return t?t.getAttribute("data-analytics-tags").split(" "):[]}},{key:"extractGroups",value:function(e){var t=e.closest("[data-analytics-groups]");if(t){var n=decodeURIComponent(t.getAttribute("data-analytics-groups"));try{n=JSON.parse(n)}catch(e){return console.log("JSON.parse error! Can not convert "+n+" to JSON."),[]}return n}return[]}},{key:"hasFragmentAsImmediateChild",value:function(e){return Array.prototype.slice.call(e.childNodes,0).some(function(e){return e.classList&&e.classList.contains("opbox-fragment")})}}]),e}();t.default=a},function(e,t,n){"use strict";e.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).targetWindow;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.targetWindow=t}return i(e,[{key:"getDomNodes",value:function(e){var t=this.targetWindow.document.querySelectorAll('[data-prototype-id="'+e+'"]');return t?Array.from(t):[]}},{key:"init",value:function(e,t){var n=e.prototypeName;n&&t({domNodes:this.getDomNodes(n)})}},{key:"createAPI",value:function(){return{init:this.init.bind(this)}}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var n=t.targetWindow,i=t.alias,r=void 0===i?"cm":i,o=t.config,a=void 0===o?{}:o,s=t.isExternal,u=void 0!==s&&s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var c=a.cookieMonster,l=c.host,f=c.account,d=c.defaultCustomParams,h=void 0===d?{}:d;this.targetWindow=n,this.document=this.targetWindow.document,this.alias=r,this.host=l,this.account=f,this.isExternal=u,this.defaultCustomParams=h}return i(e,[{key:"initialize",value:function(){if(this.isExternal)return this.loadExternal(),void this.callCookieMonster.call(this,"create",this.account);this.host&&this.account&&!this.isLoaded()&&(this.load(),this.callCookieMonster.call(this,"create",this.account),this.send("pageview",{customParams:this.defaultCustomParams.pv}))}},{key:"load",value:function(){this.isLoaded()||function(e,t,n,i,r){e["cm.analytics.object"]=r,e[r]=e[r]||function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];(e[r].q=e[r].q||[]).push(n)};var o=t.createElement("script"),a=t.getElementsByTagName("script")[0];o.async=1,o.src=i,a.parentNode.insertBefore(o,a)}(this.targetWindow,this.document,0,this.host,this.alias)}},{key:"loadExternal",value:function(){this.isLoaded()||function(e,t){e["cm.analytics.object"]=t,e[t]=e[t]||function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];(e[t].q=e[t].q||[]).push(i)}}(this.targetWindow,this.alias)}},{key:"send",value:function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=this.callCookieMonster).call.apply(e,[this,this.sendCommand()].concat(n))}},{key:"callCookieMonster",value:function(){if(this.isLoaded()){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.targetWindow[this.alias].apply(null,t)}}},{key:"isLoaded",value:function(){return"function"==typeof this.targetWindow[this.alias]}},{key:"sendCommand",value:function(){return"send@"+this.account}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0).debounce,o=t.SEEN_ATTRIBUTE_NAME="data-seen",a=t.VISIBLE_FOR_ATTRIBUTE_NAME="data-visible-for",s=t.BOX_VIEW_ENABLED_ATTRIBUTE_NAME="data-analytics-enabled",u=t.BOX_VIEW_PROXIED_ATTRIBUTE_NAME="data-analytics-proxied",c=function(e){return Array.prototype.slice.call(e)},l=function(){function e(t){var n=t.targetWindow,i=t.boxes,o=void 0===i?[]:i,a=t.significantElementSizePercentage,s=void 0===a?.75:a,u=t.timeoutValue,c=void 0===u?500:u,l=t.debounceTimeoutValue,f=void 0===l?20:l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.targetWindow=n,this.config={timeoutValue:c,debounceTimeoutValue:f,significantElementSizePercentage:s},this.resetState(),this.boxes=o.length?o:e.getBoxViewEnabledNodes(n.document),this.visibleElements=[],this.scrollHandlerWithContext=this.scrollHandler.bind(this),this.scrollEndHandler=r(this.resetCurrentlyVisibleElementsAfterScroll,this.config.debounceTimeoutValue),this.resizeEndHandler=r(this.resizeHandler.bind(this),this.config.debounceTimeoutValue),this.resetCurrentlyVisibleElementsOnTimeout=r(this.resetCurrentlyVisibleElements.bind(this),this.config.debounceTimeoutValue),this.markCurrentlyVisibleElementsAsSeenOnTimeout=r(this.markCurrentlyVisibleElementsAsSeen.bind(this),this.config.timeoutValue)}return i(e,[{key:"setUserViewport",value:function(){this.state.userViewport=e.getUserViewport(this.targetWindow)}},{key:"resetState",value:function(){var t=(new Date).getTime();this.state={isScrolling:!1,scrollStartTime:t,counterStartTime:t,userViewport:e.getUserViewport(this.targetWindow)}}},{key:"createEvent",value:function(e){var t=this.targetWindow.document.createEvent("CustomEvent");return t.initCustomEvent(e,!0,!0,{}),t}},{key:"isSignificantPartOfElementVisible",value:function(t){var n=t.right-t.left,i=t.bottom-t.top,r=e.getElementVisibileDimensionLength(t.left,t.right,this.state.userViewport.width,n);return e.getElementVisibileDimensionLength(t.top,t.bottom,this.state.userViewport.height,i)*r/(n*i)>this.config.significantElementSizePercentage}},{key:"putVisibleElementsToBuffer",value:function(){var t=!1,n=this.visibleElements.slice();this.visibleElements=[];for(var i=0;i<this.boxes.length;i+=1){var r=null;try{r=this.boxes[i].getBoundingClientRect()}catch(e){t=!0,this.boxes[i]=null}r&&(this.isSignificantPartOfElementVisible(r)?(this.visibleElements.push(this.boxes[i]),-1===n.indexOf(this.boxes[i])&&this.boxes[i].dispatchEvent(this.createEvent("inViewport"))):-1!==n.indexOf(this.boxes[i])&&this.boxes[i].dispatchEvent(this.createEvent("outOfViewport")))}t&&(this.boxes=this.boxes.filter(function(e){return null!==e}),e.getBoxViewEnabledNodes(this.targetWindow.document).forEach(this.addBox.bind(this)))}},{key:"markElementAsSeen",value:function(e,t){if(e){var n=parseInt(e.getAttribute(a),10)||0;(!e.getAttribute(o)&&n+t)>=this.config.timeoutValue&&(e.setAttribute(o,!0),e.dispatchEvent(this.createEvent("boxView"))),e.setAttribute(a,n+t)}}},{key:"markPreviouslyVisibleElementsAsSeen",value:function(){var e=this,t=(new Date).getTime();this.visibleElements.forEach(function(n){e.markElementAsSeen(n,t-e.state.counterStartTime)})}},{key:"markPreviouslyVisibleElementsAsSeenAfterScroll",value:function(){var e=this;this.visibleElements.forEach(function(t){e.markElementAsSeen(t,e.state.scrollStartTime-e.state.counterStartTime)})}},{key:"markCurrentlyVisibleElementsAsSeen",value:function(){var e=this;this.visibleElements.forEach(function(t){e.markElementAsSeen(t,e.config.timeoutValue)})}},{key:"resetCurrentlyVisibleElements",value:function(){this.markPreviouslyVisibleElementsAsSeen(),this.putVisibleElementsToBuffer(),this.markCurrentlyVisibleElementsAsSeenOnTimeout(),this.resetState()}},{key:"resetCurrentlyVisibleElementsAfterScroll",value:function(){this.markPreviouslyVisibleElementsAsSeenAfterScroll(),this.putVisibleElementsToBuffer(),this.markCurrentlyVisibleElementsAsSeenOnTimeout(),this.resetState()}},{key:"scrollHandler",value:function(){this.state.isScrolling||(this.state.scrollStartTime=(new Date).getTime(),this.state.isScrolling=!0),clearTimeout(this.markCurrentlyVisibleElementsAsSeenOnTimeout()),this.scrollEndHandler()}},{key:"resizeHandler",value:function(){this.setUserViewport(),this.resetCurrentlyVisibleElements()}},{key:"addBox",value:function(e){-1===this.boxes.indexOf(e)&&this.boxes.push(e)}},{key:"isBoxInViewport",value:function(e){return-1!==this.visibleElements.indexOf(e)}},{key:"clearAttributes",value:function(e){this.boxes.forEach(function(t){t&&t.matches(e)&&(t.removeAttribute(o),t.removeAttribute(a))})}},{key:"markBoxAsRendered",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n&&this.clearAttributes(n),t.getAttribute("data-analytics-enabled")&&this.addBox(t),e.getBoxViewEnabledNodes(t).forEach(this.addBox.bind(this)),this.resetCurrentlyVisibleElementsOnTimeout()}},{key:"markBoxAsVisible",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.addBox(e),t?this.markElementAsSeen(e,this.config.timeoutValue):this.resetCurrentlyVisibleElementsOnTimeout()}},{key:"recursivelyMarkBoxAsVisible",value:function(t){var n=this;this.addBox(t),e.getBoxViewEnabledNodes(t).forEach(function(e){n.addBox(e)}),this.resetCurrentlyVisibleElementsOnTimeout()}},{key:"removeBox",value:function(e){this.boxes=this.boxes.filter(function(t){return t!==e})}},{key:"markBoxAsHidden",value:function(e){this.removeBox(e),this.resetCurrentlyVisibleElementsOnTimeout()}},{key:"recursivelyMarkBoxAsHidden",value:function(t){var n=this;this.removeBox(t),e.getBoxViewEnabledNodes(t).forEach(function(e){n.removeBox(e)}),this.resetCurrentlyVisibleElementsOnTimeout()}},{key:"trackBoxScroll",value:function(e){e.addEventListener("scroll",this.scrollHandlerWithContext)}},{key:"initialize",value:function(){this.targetWindow.addEventListener("scroll",this.scrollHandlerWithContext),this.targetWindow.addEventListener("resize",this.resizeEndHandler),this.resetCurrentlyVisibleElements()}},{key:"createAPI",value:function(){return{markBoxAsRendered:this.markBoxAsRendered.bind(this),markBoxAsVisible:this.markBoxAsVisible.bind(this),recursivelyMarkBoxAsVisible:this.recursivelyMarkBoxAsVisible.bind(this),markBoxAsHidden:this.markBoxAsHidden.bind(this),recursivelyMarkBoxAsHidden:this.recursivelyMarkBoxAsHidden.bind(this),trackBoxScroll:this.trackBoxScroll.bind(this),isBoxInViewport:this.isBoxInViewport.bind(this)}}}],[{key:"getBoxViewEnabledNodes",value:function(e){var t=c(e.querySelectorAll("["+s+"]")),n=c(e.querySelectorAll("["+u+"]")).map(function(e){return c(e.querySelectorAll("["+s+"]"))}).filter(function(e){return e.length}).reduce(function(e,t){return e.concat(t)},[]),i=n.filter(function(e,t){return n.indexOf(e)===t});return t.filter(function(e){return-1===i.indexOf(e)})}},{key:"getElementVisibileDimensionLength",value:function(e,t,n,i){return e>0?e<n?t<n?t-e:n-e:0:t<0?0:t<n?t:i}},{key:"getUserViewport",value:function(e){return{width:e.innerWidth,height:e.innerHeight}}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),o="missing edge host",a=function(){function e(t){var n=this,i=t.httpClient,r=t.config,a=void 0===r?{}:r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.get=function(e,t){return n.edgeHost?n.httpClient.get(n.prepareRequestUrl(e),n.prepareRequestSettings(t)):Promise.reject(o)},this.put=function(e,t,i){return n.edgeHost?n.httpClient.put(n.prepareRequestUrl(e),t,n.prepareRequestSettings(i)):Promise.reject(o)},this.post=function(e,t,i){return n.edgeHost?n.httpClient.post(n.prepareRequestUrl(e),t,n.prepareRequestSettings(i)):Promise.reject(o)},this.delete=function(e,t){return n.edgeHost?n.httpClient.delete(n.prepareRequestUrl(e),n.prepareRequestSettings(t)):Promise.reject(o)},this.httpClient=i,this.edgeHost=a.edgeHost,this.defaultRequestSettings={headers:{"Content-type":"application/vnd.allegro.public.v1+json",Accept:"application/vnd.allegro.public.v1+json"}}}return i(e,[{key:"prepareRequestSettings",value:function(e){return(0,r.default)({},this.defaultRequestSettings,e)}},{key:"prepareRequestUrl",value:function(e){return this.edgeHost+e}},{key:"createAPI",value:function(){return{get:this.get,put:this.put,post:this.post,delete:this.delete}}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(14),o=function(){function e(t){var n=t.targetWindow;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.targetWindow=n,this.document=n.document}return i(e,[{key:"getBoxAnchorNode",value:function(e){return"string"!=typeof e?null:this.document.querySelector('a[name="'+e+'"]')}},{key:"getTopOffset",value:function(e){var t=this.targetWindow.pageYOffset||this.document.documentElement.scrollTop||0;return e?e.getBoundingClientRect().top+t:null}},{key:"scrollTo",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).animate,n={duration:void 0===t||t?500:0};if("number"!=typeof e){var i=this.getBoxAnchorNode(e);if(i){var o=this.getTopOffset(i);(0,r.scroll)(this.targetWindow,o,n)}}else(0,r.scroll)(this.targetWindow,e,n)}},{key:"tween",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.tween.apply(void 0,[this.targetWindow].concat(t))}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=o.duration,c=void 0===u?r:u,l=o.onFinish;if("function"!=typeof i)return null;var f=s(e),d=Date.now(),h=n-t,v=!1;return function e(){var n=Date.now()-d;if(v||n>=c)"function"==typeof l&&l(),v=!1;else{var r=Math.min(n/c,1),o=a.easeInOutQuart(r)*h+t;i(o),f(e)}}(),{stop:function(){v=!0}}}Object.defineProperty(t,"__esModule",{value:!0}),t.tween=i,t.scroll=function(e){function t(){e[o]&&"function"==typeof e[o].stop&&(e[o].stop(),e[o]=null)}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).duration,s=void 0===a?r:a,u=e.pageYOffset,c=Math.max(0,n),l=e.document.body.scrollHeight;t(),e[o]=i(e,u,n,function(n){e.scrollTo(0,Math.round(n)),function(t){var n=t===c||t===c,i=e.innerHeight+t>=l;return n||i}(n)&&t()},{duration:s})};var r=500,o="opboxAnimationTimerInterval",a={easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},s=function(e){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){try{i.default.create(window,{pageName:function(){var e=window.dataLayer;return e&&e[0]&&e[0].pageType||null}()||window.location.pathname.split("/").slice(0,2).join("/"),sendInterval:r,samplingThreshold:o})}catch(e){}};var i=function(e){return e&&e.__esModule?e:{default:e}}(n(16)),r=500,o=2},function(e,t,n){"use strict";function i(e){for(var t=0,n=Date.now();t<p&&Date.now()-n<e;)!function(){for(var e=0,t=0;t<1e3;t++)e+=parseInt(""+t)}(),t++;return t}function r(e){return"number"==typeof e&&e>=0?Math.min(Math.round(1e3*e),E):-1}function o(e,t){var n=e.getEntriesByType(w).filter(function(e){return e.name===t});return n.length>0?Math.round(n[0].startTime):-1}function a(e,t,n){return function(e,t){var n=function(e,t){var n=t.reduce(function(e,t){return e[t.href||t.src]=!0,e},{});return e.filter(function(e){return!0===n[e.name]})}(e,t),i=n.reduce(function(e,t){return{encodedBodySize:e.encodedBodySize+(t.encodedBodySize||0),transferSize:e.transferSize+(t.transferSize||0)}},{encodedBodySize:0,transferSize:0}),r=function(e){var t=0,i=0,r=0;return n.forEach(function(e){e.transferSize>0?i++:e.encodedBodySize>0?t++:r++}),{hits:t,misses:i,unknown:r}}();return{totalEncodedBodySize:i.encodedBodySize,totalTransferSize:i.transferSize,cacheHits:r.hits,cacheMisses:r.misses,cacheStatusUnknown:r.unknown}}(t,Array.prototype.slice.call(e.querySelectorAll(n)))}function s(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function u(e){return[e.cacheHits,e.cacheMisses,e.cacheStatusUnknown,e.totalEncodedBodySize,e.totalTransferSize]}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=1,h=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],v=0,m=-1,y=function(){function e(t){l(this,e),this.performance=t,this.processedMarks={}}return f(e,[{key:"getUserTimings",value:function(){var t=this;if(!this.isUserTimingSupported())return[];var n=this.performance.getEntriesByType("mark").filter(function(n){return!e.isBlacklisted(n)&&!t.hasBeenProcessed(n)});return n.forEach(function(e){return t.saveAsProcessed(e)}),n.map(e.markToEvent)}},{key:"isUserTimingSupported",value:function(){return"object"===c(this.performance)&&"function"==typeof this.performance.getEntriesByType}},{key:"saveAsProcessed",value:function(t){this.processedMarks[e.entryHash(t)]=1}},{key:"hasBeenProcessed",value:function(t){return e.entryHash(t)in this.processedMarks}}],[{key:"isBlacklisted",value:function(e){return"optimizely:"===e.name.substring(0,"optimizely:".length)}},{key:"entryHash",value:function(e){return e.name+"###"+e.entryType+"###"+e.startTime+"###"+e.duration}},{key:"markToEvent",value:function(e){return{category:"Performance",value:e.name,label:"Mark",customParams:{st:Math.round(e.startTime)}}}}]),e}(),p=5e3,b=10,g=40,k="navigation",E=1e6,w="paint",x="resource",S=["allegro.pl","assets.allegrostatic.pl","cdn.allegrostatic.com","assets.allegrostatic.com"],T=1,A=function(){function e(t,n,i){l(this,e),this.document=t.document,this.navigator=t.navigator,this.performance=t.performance,this.sender=i,this.pageName=n,this.userTiming=new y(this.performance)}return f(e,[{key:"sendNavigationTiming",value:function(){this.sendEvent(function(e,t){return function(e){return"object"===(void 0===e?"undefined":c(e))&&"object"===c(e.timing)}(e)?{category:"Performance",label:"NavigationTiming",customParams:{m:function(e){var t=function(t){var n=e.timing,i=void 0===n?{}:n;return h.map(function(e){return{name:e,value:i[e]}})}(),n=t[0].value;return t.slice(1).map(function(e){return function(e,t){var n=t-e;return!t||t<v||e<v||n<v?m:n}(n,e.value)})}(e),v:d,page:t}}:null}(this.performance,this.pageName))}},{key:"sendUserTimings",value:function(){var e=this;this.userTiming.getUserTimings().forEach(function(t){return e.sendEvent(t)})}},{key:"sendResourceInformation",value:function(){this.sendEvent(function(e,t,n){var l=(i(b),{benchmarkScore:i(g)}),f=function(e,t){if(!function(e){return"object"===(void 0===e?"undefined":c(e))&&"function"==typeof e.getEntriesByType}(t))return null;var n=t.getEntriesByType(k)[0];return{domElementsCount:e.getElementsByTagName("*").length,htmlLength:e.documentElement.innerHTML.length,encodedBodySize:n?n.encodedBodySize:-1,transferSize:n?n.transferSize:-1}}(e,n)||{},d=function(e){if(!function(e){return"object"===c(e.connection)}(e))return null;var t=e.connection,n=t.type,i=void 0===n?"":n,o=t.effectiveType,a=void 0===o?"":o,s=t.downlinkMax,u=void 0===s?-1:s,l=t.downlink,f=void 0===l?-1:l,d=t.rtt,h=void 0===d?-1:d;return{connectionType:i,connectionEffectiveType:a,connectionDownlinkMax:r(u),connectionDownlink:r(f),connectionRtt:h}}(t)||{},h=function(e){return function(e){return"object"===(void 0===e?"undefined":c(e))&&"function"==typeof e.getEntriesByType}(e)?{firstPaint:o(e,"first-paint"),firstContentfulPaint:o(e,"first-contentful-paint")}:null}(n)||{},v=function(e,t){if(!function(e,t){return"object"===(void 0===t?"undefined":c(t))&&"function"==typeof t.getEntriesByType&&"function"==typeof e.querySelectorAll}(e,t))return null;var n=t.getEntriesByType(x),i=n.filter(function(e){return"link"===e.initiatorType}),r=function(e){var t=[],n=[];return e.forEach(function(e){for(var i=0;i<S.length;i++){var r=S[i];if(0===e.name.indexOf("https://"+r+"/")){t.push(e);break}}i===S.length&&n.push(e)}),{internal:t,external:n}}(n.filter(function(e){return"script"===e.initiatorType})),o=n.filter(function(e){return"img"===e.initiatorType});return{styles:a(e,i,'link[rel="stylesheet"]'),internalScripts:a(e,r.internal,"script[src]"),externalScripts:a(e,r.external,"script[src]"),images:a(e,o,"img")}}(e,n)||{};return s(f)&&s(d)&&s(h)&&s(v)?null:{category:"Performance",label:"ResourceInformation",customParams:{v:T,bs:[l.benchmarkScore],ds:[f.domElementsCount,f.htmlLength,f.encodedBodySize,f.transferSize],nct:d.connectionType,net:d.connectionEffectiveType,ns:[d.connectionDownlinkMax,d.connectionDownlink,d.connectionRtt],ps:[h.firstPaint,h.firstContentfulPaint],tst:u(v.styles),tis:u(v.internalScripts),tes:u(v.externalScripts),tim:u(v.images)}}}(this.document,this.navigator,this.performance))}},{key:"sendEvent",value:function(e){null!==e&&this.sender.call(null,e)}}]),e}(),C=["regular","detail","user"],P={create:function(e,t){var n=t.pageName,i=void 0===n?"":n,r=t.sendInterval,o=void 0===r?500:r,a=t.samplingThreshold,s=void 0===a?16:a;if(!function(e,t,n){return-1===C.indexOf(n)||function(e,t){try{var n=function(e){return e.cookie.replace(/(?:(?:^|.*;\s*)_cmuid\s*\=\s*([^;]*).*$)|^.*$/,"$1")}(e);return""===n?t>0:parseInt(n.charAt(0),16)<t}catch(e){return!1}}(e,t)}(e.document,s,i))return null;var u=new A(e,i,function(t){"function"==typeof e.cm?e.cm("send","event",t):"undefined"!=typeof console&&console.log("Cannot send performance data",t)});return"complete"===e.document.readyState?(u.sendNavigationTiming(),u.sendResourceInformation()):e.addEventListener("load",function(){e.setTimeout(function(){u.sendNavigationTiming(),u.sendResourceInformation()},0)}),e.setInterval(function(){u.sendUserTimings()},o),u.sendUserTimings(),u}};e.exports=P},function(e,t,n){"use strict";function i(e,t){if((0,o.isFunction)(e)&&(0,o.isFunction)(t)){if(!e.__queue__)return;!function(e,t){e.forEach(function(e){var n=e.args,i=e.reject,a=e.resolve,s=function(e,t){try{return e.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))}catch(e){return console.error(e),void("object"===r("NREUM")&&null!==NREUM&&"function"==typeof NREUM.noticeError&&NREUM.noticeError(e))}}(t,n);s&&(0,o.isFunction)(s.then)&&(0,o.isFunction)(a)&&(0,o.isFunction)(i)&&s.then(a,i)})}(e.__queue__,t)}else(0,o.isObject)(e)&&(0,o.isObject)(t)&&Object.keys(e).forEach(function(n){i(e[n],t[n])})}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=i;var o=n(0)}]);